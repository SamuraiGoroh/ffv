// Character State (0x50 bytes)
//
// Party data is stored at 7E:0500 as 4 CharState structs
//

// character
enum { BUTZ, LENNA, GALUF, FARIS, CARA, NONE=0xFF };

// character mask
#define GENDER   0X08
#define DISABLED 0x40
#define BACKROW  0x80

// job
enum { KNIGHT, MONK, THIEF, DRAGOON, NINJA, SAMURAI, BERSERKER,
       ARCHER, MYSTIC_KNIGHT, WHITE_MAGE, BLACK_MAGE, TIME_MAGE,
       SUMMONER, BLUE_MAGE, RED_MAGE, BEAST_MASTER, CHEMIST,
       GEOMANCER, BARD, DANCER, MIMIC, NORMAL };

// ability 0-3
enum { NONE, OTHER, ITEM, ROW, DEF, FIGHT, GUARD, KICK, BUILD_UP,
       MANTRA, ESCAPE, STEAL, CAPTURE, JUMP, DRAGON_SWORD, SMOKE, IMAGE,
       THROW, SWORD_SLAP, GIL_TOSS, SLASH, ANIMALS, AIM, XFIGHT, CONJURE,
       OBSERVE, ANALYZE, TAME, CONTROL, CATCH, RELEASE, COMBINE, DRINK,
       PRAY, REVIVE, TERRAIN, DUMMY01, HIDE, SHOW, DUMMY02, SING,
       FLIRT, DANCE, MIMIC, MGC_SWORD, MGC_SWORD, MGC_SWORD, MGC_SWORD, MGC_SWORD, 
       MGC_SWORD, WHITE, WHITE, WHITE, WHITE, WHITE, WHITE, BLACK,
       BLACK, BLACK, BLACK, BLACK, BLACK, DIMEN, DIMEN, DIMEN, 
       DIMEN, DIMEN, DIMEN, SUMMON, SUMMON, SUMMON, SUMMON, SUMMON, 
       RED, RED, RED, XMAGIC, BLUE };

// status 01 - Cureable
#define BLIND  0x01
#define ZOMBIE 0x02
#define POISON 0x04
#define FLY    0x08
#define MINI   0x10
#define TOAD   0x20
#define STONE  0x40
#define DEAD   0x80

// status 02 - Temporary
#define IMAGE1 0x01
#define IMAGE2 0x02
#define MUTE   0x04
#define BERSRK 0x08
#define CHARM  0x10
#define HALT   0x20
#define SLEEP  0x40
#define AGING  0x80

// status 03 - Dispellable
#define REGEN  0x01
#define INVUL  0x02
#define SLOW   0x04
#define HASTE  0x08
#define STOP   0x10
#define SHELL  0x20
#define ARMOR  0x40
#define WALL   0x80

// status 04 - Permanent
#define HIDDEN 0x01
#define PERIL  0x02
#define SING   0x04
#define LEAK   0x08
#define COUNT  0x10
#define CTRL   0x20
#define FALSE  0x40
#define ERASED 0x80


typedef struct _CharState
{
    u8          character;
    u8          job;
    u8          level;
    u24         experience;
    u16         hp, hp_max;     // 9999 max
    u16         mp, mp_max;     // 9999 max
    
    u8          head, body;     // equipment
    u8          relic;
    u8          rhand1, lhand1; // Shields
    u8          rhand2, lhand2; // Weapons, overrides L/R hand1
    
    u8          caught;         // Monster caught
    
    u8          ability[4];     // Command abilities
    
    u8          status1;        // Cureable Status
    u8          status2;        // Temporary Status
    u8          status3;        // Dispellable Status
    u8          status4;        // Permanent Status
    
    u8          unk[2];         // Actions Flags & Damage mod??
    
    u16         innate;         // Innate Abilities, like Pre-entive, Dash, etc.

    u8          mag_element;    // Magic Element Up
    
    u8          weight;         // Equipment weight

    u8          strength;       // Base (99 max), affected by aging 
    u8          agility;        // Base (99 max), affected by aging 
    u8          vitality;       // Base (99 max), affected by aging 
    u8          mag_power;      // Base (99 max), affected by aging 
    u8          strength_max;   // Current Strenght
    u8          agility_max;    // Current Agility
    u8          vitality_max;   // Current Vitality
    u8          mag_power_max;  // Current Magic Power
    u8          evade;          // %Evade
    u8          defense;        // Defense
    u8          mag_evade;      // %Magic Evade
    u8          mag_defense;    // Magic Defense
    
    u8          el_absorb;      // Elemental Absorb
    u8          el_unk;         // Elemental ?
    u8          el_immune;      // Elemental Immunity
    u8          el_half;        // Elemental Half
    u8          el_weak;        // Elemental Weakness

    u8          unk[3];         // Related to status immunities?
    
    u8          weapon_special; // Specialty used in weapons, like: Wonder Rod, Magic Sword OK, Parry, etc
    u8          equip_special;  // Equipment Specialty, like: Catch Up, Steal Up, Half MP, etc
    
    u8          job_level;
    u16         abp;            // 999 max
    u8          unk[3];         // generated

    u8          can_equip[4];   // generated, based on job
    u16         attack;         // generated based on equipment
    u8          unk[10];        // padding?    
} CharState;
